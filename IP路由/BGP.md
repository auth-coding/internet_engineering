BGP：(Border Gate Protocol)边界网关协议，用于不同或者相同的AS（自治系统）间的路由信息交换的网关协议。

BGP分类：
	IBGP：内部边界网关协议，指完成相同AS内的路由信息交换的网关协议。
	EBGP：外部边界网关协议，用于完成不同AS的路由信息交换的网关协议。

BGP选择最佳路由路径的规则：
	若路由表项无效，则按如下顺序选择：
		LOCAL PROEF值高的路由 > 由BGP speaker自己生成的路由 > AS长度最短 > ORIGIN值最低 >　MED最小 > 到达吓一跳的IGP metric值最小 > EBGP中最早接收的 > router id最小的 > cluster长度最大的 > 邻居地址最大的 

BGP典型应用：
	1、路由通告
	2、拓扑需要实现物理全连接很复杂或者条件不允许的情况下，可以使用bgp协议做路由反射器，在AS内搭建路由反射拓扑，减少设备连接数量，实现逻辑上的全连接。
		情况一：bgp运行规则表示，同一个as域内的ibgp邻居是不会讲学到的路由通告给下一个邻居的，所以就要求as内的ibgp邻居间要实现全连接，可是在拓扑很复杂时
			   实现全连接很困难，于是就可以利用bgp做路由反射器，实现逻辑上的全连接。
			   步骤一：找一个设备为RR，其余设备为Ri(i=1、2、、、、)，另外的设备分别于RR建立ibgp邻居关系。
			   步骤二：在RR将其余设备设置为它的路由反射客户端。

BGP路由属性：
	1、ORIGIN属性：指出BGP路由的起源，包含三种取值：IGP、EGP、INCOMPLETE。
	2、AS-PATH属性：反向列出了路由先后经过的自治系统，最后一个AS放置在列表的开始出。
	3、NEXT-HOP属性：指出到达BGP路由的下一跳IP地址。
	4、MULTI-EXIT-DISC 属性：区分到达相同邻居 AS 的多个出口/入口点，值越小路由优先级越高。
	5、LOCAL-PREF 属性：在AS内部区分IBGP路由的优先级，值越大优先级越高。

BGP功能特性：
	1、建立BGP邻居
	2、建立BGP路由反射器---搭建BGP路由反射拓扑，降低bgp邻居全连接带来的部署难度。
	3、配置BGP联盟---降低bgp邻居全连接带来的部署难度。
	4、向BGP注入本地AS的网络信息---向BGP输入本地路由信息，通过BGP协议将本地路由宣告出去。
	5、控制BGP邻居之间的路由交互---配置BGP邻居路由交换策略，控制从该邻居获得的路由或者向该邻居通告的路由。
	6、从BGP获知其他AS的可达网络---将 BGP 协议中的路由信息注入到核心路由表、或 IGP 协议中。
	7、配置BGP和IGP同步---配置 BGP 检查路由是否与 IGP 同步。
	8、BGP软复位---路由策略发生变化后，使用软复位应用新的策略。（通常BGP策略发生变化以后，都需要重新建立BGP来实施新的路由策略，但配置BGP软复位以后不用。）
	9、配置BGP的路径属性---BGP 提供多种路由属性的控制策略。
		BGP能基于三种方式控制路由信息的分发：
			1、ip地址--使用neighbor distribute-list 或者 neighbor prefix-list实现控制
			2、as-path属性
			3、community属性
	10、配置BGP路由聚合---配置路由聚合，减小BGP路由表大小。
	11、配置BGP路由衰减---路由在被认为有效和无效之间来回变化时，称为路由振荡。路由振荡常引起不稳定的路由在网络中传播，从而导致网络的不稳定性。BGP 	
		路由衰减是一种减少路由振荡的方法，通过监控来自 EBGP Peer 的路由信息来减少可能的路由振荡。
		路由衰减处理的简单描述：对每一次路由振荡，BGP Speaker 对该路由进行一次惩罚(累加到惩罚值中)，当惩罚值达到抑制上
		限，路由将被抑制。在半衰期到达时，惩罚值减为一半，当惩罚值减到重新启用值时，路由重新被激活。路由被抑制的最长时限为最大抑制时间值。
	12、配置BGP的管理距离---管理距离用于评价各种路由来源的可信度。管理距离越小，则路由越优。
	13、配置BGP多路均衡负载---多路径负载均衡，指到达同一网络的路径存在多条，数据报文从这些路径中均衡转发。在路由表中的表现为一条路由存在多个
		下一跳。但只支持同类bgp之间均衡。缺省情况下，当到达同一网络的路径在 BGP 路由表里存在多条时，BGP 会从中计算出一条优先级最高的路由。如果存在多条
		路由优先级相同且都为最优，BGP 仍然会通过比较规则选出唯一的路由，并将此路由通知给转发面，控制数据流转发。启动多路径负载均衡功能后，BGP 除了会计算出唯一的最优路由，还会将与之优先级相同的路径列为等价路由，然后将最优路由与等价路由一起通知给转发面，从而实现负载均衡。路由等价的条件是路由基本属性相同、优先级也相同，即按照 BGP 最优路径选择规则，在进行 Router-ID 比较之前，路径优先级相同。
	14、配置BGP快速重路由---缺省情况下，当到达同一网络的路径在 BGP 路由表里存在多条时，BGP 会从中计算出一条优先级最高的路由。引入 BGP FRR功能以后，BGP 	会为每一条最优路由再优选一条备份路由。通过BFD快速线路检测机制检测主线路故障后，将数据切换到本地原先计算好的备份线路转发。路由收敛完成后，将数据切	换到路由重新计算后的最优线路转发。这样 BGP FRR，就可以解决线路出现故障后，BGP 路由收敛完成之前的路由不通问题。
	15、配置BGP多路径旁路保护---原先的 BGP FRR 只支持 1:1 的保护，在开启 ECMP 的条件下，FRR 不会产生作用，多路径旁路保护使得 BGP 支持 1：N 的保
		护。用户可以配置 BGP 多路径旁路保护，在配置 ECMP 的情况下也能选出一条备份的旁路路径。当所有的 ECMP 路径失效后，旁路路由成为主路由进行转发。
		引入 BGP 多路径旁路保护功能以后，BGP 存在 ECMP 路由的时候会再优选一条备份路由。通过BFD快速线路检测机制检测主线路故障后，将数据切换到本地原先计算好的备份线路转发。路由收敛完成后，将数据切换到路由重新计算后的最优线路转发。
	16、配置BGP GR---GR （Graceful Restart，优雅重启），主要是为了实现在协议的重新启动过程中数据转发不间断。在管理板主备切换过程中，GR功能使网络拓扑保		持稳定，维持转发表，保障关键业务不中断。
	17、配置BGP NSR技术---（None-Stop-Routing，不间断路由），主要是为了实现主从切换时，在协议的重新启动过程中路由不间断。在管理板主备切换过程中，NSR 		功能使网络拓扑保持稳定，维持邻居状态，维持转发表，保障关键业务不中断。不同于 BGP GR，BGP NSR 是一个单独的个体过程，不需要邻居设备辅助完成。启用 	BGP NSR 功能的邻居，不需要邻居双方协商 GR 能力，不需要邻居协助，不存在互通性问题。nsr 是一种邻居不感知的可靠性技术。

